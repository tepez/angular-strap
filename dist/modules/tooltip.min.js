/**
 * angular-strap
 * @version v2.1.3 - 2014-11-18
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","dimensions","$$rAF","$timeout",function(e,n,o,i,a,l,r,s,u,c){function f(e,i){function a(){F.$emit(P.prefixEvent+".show",T)}function l(){return F.$emit(P.prefixEvent+".hide",T),L&&"focus"===P.trigger?e[0].blur():void D()}function f(){var t=P.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",T.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",T.enter),e.on("hover"===t?"mouseleave":"blur",T.leave),"button"===x&&"hover"!==t&&e.on(g?"touchstart":"mousedown",T.$onFocusElementMouseDown))})}function b(){for(var t=P.trigger.split(" "),n=t.length;n--;){var o=t[n];"click"===o?e.off("click",T.toggle):"manual"!==o&&(e.off("hover"===o?"mouseenter":"focus",T.enter),e.off("hover"===o?"mouseleave":"blur",T.leave),"button"===x&&"hover"!==o&&e.off(g?"touchstart":"mousedown",T.$onFocusElementMouseDown))}}function w(){"focus"!==P.trigger?M.on("keyup",T.$onKeyUp):e.on("keyup",T.$onFocusKeyUp)}function y(){"focus"!==P.trigger?M.off("keyup",T.$onKeyUp):e.off("keyup",T.$onFocusKeyUp)}function v(){c(function(){M.on("click",E),m.on("click",T.hide),N=!0},0,!1)}function k(){N&&(M.off("click",E),m.off("click",T.hide),N=!1)}function E(t){t.stopPropagation()}function S(){return"body"===P.container?s.offset(P.target[0]||e[0]):s.position(P.target[0]||e[0])}function C(t,e,n,o){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-o/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"left":i={top:e.top+e.height/2-o/2,left:e.left-n};break;default:i={top:e.top-o,left:e.left+e.width/2-n/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-n}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-o;break;case"bottom":i.top=e.top+e.height}return i}function D(){clearTimeout(K),T.$isShown&&null!==M&&(P.autoClose&&k(),P.keyboard&&y()),q&&(q.$destroy(),q=null),M&&(M.remove(),M=T.$element=null)}var T={},x=e[0].nodeName.toLowerCase(),P=T.$options=angular.extend({},t,i);T.$promise=h(P.template);var F=T.$scope=P.scope&&P.scope.$new()||n.$new();if(P.delay&&angular.isString(P.delay)){var A=P.delay.split(",").map(parseFloat);P.delay=A.length>1?{show:A[0],hide:A[1]}:A[0]}P.title&&(T.$scope.title=P.title),F.$setEnabled=function(t){F.$$postDigest(function(){T.setEnabled(t)})},F.$hide=function(){F.$$postDigest(function(){T.hide()})},F.$show=function(){F.$$postDigest(function(){T.show()})},F.$toggle=function(){F.$$postDigest(function(){T.toggle()})},T.$isShown=F.$isShown=!1;var K,U;P.contentTemplate&&(T.$promise=T.$promise.then(function(t){var e=angular.element(t);return h(P.contentTemplate).then(function(t){var n=p('[ng-bind="content"]',e[0]);return n.length||(n=p('[ng-bind="title"]',e[0])),n.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var O,M,j,H,q;T.$promise.then(function(t){angular.isObject(t)&&(t=t.data),P.html&&(t=t.replace($,'ng-bind-html="')),t=d.apply(t),j=t,O=o(t),T.init()}),T.init=function(){P.delay&&angular.isNumber(P.delay)&&(P.delay={show:P.delay,hide:P.delay}),"self"===P.container?H=e:angular.isElement(P.container)?H=P.container:P.container&&(H=p(P.container)),f(),P.target&&(P.target=angular.isElement(P.target)?P.target:p(P.target)),P.show&&F.$$postDigest(function(){"focus"===P.trigger?e[0].focus():T.show()})},T.destroy=function(){b(),D(),F.$destroy()},T.enter=function(){return clearTimeout(K),U="in",P.delay&&P.delay.show?void(K=setTimeout(function(){"in"===U&&T.show()},P.delay.show)):T.show()},T.show=function(){if(P.bsEnabled){F.$emit(P.prefixEvent+".show.before",T);var t,n;P.container?(t=H,n=H[0].lastChild?angular.element(H[0].lastChild):null):(t=null,n=e),M&&D(),q=T.$scope.$new(),M=T.$element=O(q,function(){}),M.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}).addClass(P.placement),P.animation&&M.addClass(P.animation),P.type&&M.addClass(P.prefixClass+"-"+P.type),P.customClass&&M.addClass(P.customClass);var o=r.enter(M,t,n,a);o&&o.then&&o.then(a),T.$isShown=F.$isShown=!0,F.$$phase||F.$root&&F.$root.$$phase||F.$digest(),u(function(){T.$applyPlacement(),M&&M.css({visibility:"visible"})}),P.keyboard&&("focus"!==P.trigger&&T.focus(),w()),P.autoClose&&v()}},T.leave=function(){return clearTimeout(K),U="out",P.delay&&P.delay.hide?void(K=setTimeout(function(){"out"===U&&T.hide()},P.delay.hide)):T.hide()};var L;T.hide=function(t){if(T.$isShown){F.$emit(P.prefixEvent+".hide.before",T),L=t;var e=r.leave(M,l);e&&e.then&&e.then(l),T.$isShown=F.$isShown=!1,F.$$phase||F.$root&&F.$root.$$phase||F.$digest(),P.keyboard&&null!==M&&y(),P.autoClose&&null!==M&&k()}},T.toggle=function(){T.$isShown?T.leave():T.enter()},T.focus=function(){M[0].focus()},T.setEnabled=function(t){P.bsEnabled=t},T.$applyPlacement=function(){if(M){var t=S(),e=M.prop("offsetWidth"),n=M.prop("offsetHeight"),o=C(P.placement,t,e,n);o.top+="px",o.left+="px",M.css(o)}},T.$onKeyUp=function(t){27===t.which&&T.$isShown&&(T.hide(),t.stopPropagation())},T.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},T.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),T.$isShown?e[0].blur():e[0].focus()};var N=!1;return T}function p(t,e){return angular.element((e||document).querySelectorAll(t))}function h(t){return i.when(a.get(t)||l.get(t)).then(function(e){return angular.isObject(e)?(a.put(t,e.data),e.data):e})}var d=String.prototype.trim,g="createTouch"in e.document,$=/ng-bind="/gi,m=angular.element(e.document);return f}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,n,o,i){return{restrict:"EAC",scope:!0,link:function(t,e,a){var l={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","type","customClass"],function(t){angular.isDefined(a[t])&&(l[t]=a[t])}),t.hasOwnProperty("title")||(t.title=""),a.$observe("title",function(e){if(angular.isDefined(e)||!t.hasOwnProperty("title")){var o=t.title;t.title=n.trustAsHtml(e),angular.isDefined(o)&&i(function(){r&&r.$applyPlacement()})}}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,n){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(n)&&i(function(){r&&r.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t){r&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?r.show():r.hide())}),a.bsEnabled&&t.$watch(a.bsEnabled,function(t){r&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),r.setEnabled(t===!1?!1:!0))});var r=o(e,l);t.$on("$destroy",function(){r&&r.destroy(),l=null,r=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map